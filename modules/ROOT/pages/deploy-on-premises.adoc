= Deploy Applications to On-Premises Mule Instances
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]

You can deploy Mule Applications to your On-Premises Mule Instances using any of the following tools:

* Anypoint Runtime Manager +
See xref:runtime-manager::deploying-to-your-own-servers.adoc[Deploying to Your Own Servers] for instructions.
* Anypoint CLI +
See the xref:runtime-manager::anypoint-platform-cli-commands.adoc#standalone-management[runtime-mgr standalone-application deploy] command documentation for instructions.
* Anypoint Studio +
See xref:studio::import-export-packages.adoc#export-project-studio[Exporting Projects From Studio] for instructions. 
* Mule Maven Plugin +
Follow the instructions in this article to deploy to Runtime Fabric using Mule Maven Plugin.

== Prerequisites

Add the Mule Maven Plugin to your project.

include::partial$mmp-concept.adoc[tag=addMuleMavenPluginToAProject]

[[mmp-deploy-standalone]]
== Deploy a Mule Application to a Standalone Mule Runtime Engine

Follow these steps to deploy a Mule Application to a local Mule instance:

. Make sure you added the Mule Maven plugin to your `pom.xml` file.
. Inside the `plugin` element, add a configuration for your standalone deployment, replacing the placeholder values with your local Mule runtime engine information:
+
[source,xml,linenums]
----
<plugin>
include::example$mmp-concept-config.xml[]
  <configuration>
    <standaloneDeployment>
      <muleHome>${mule.home.test}</muleHome>
      <muleVersion>${app.runtime}</muleVersion>
    </standaloneDeployment>
  </configuration>
</plugin>
----
+
. From the command line in your project's folder, package the application and execute the deploy goal:
+
[source,console,linenums]
----
mvn clean package deploy -DmuleDeploy
----

=== Standalone Deployment Reference

[%header,cols="30,70"]
|===
|Parameter | Description
|`standaloneDeployment` | Top-Level Element.
| `muleVersion` | The Mule version running in your local machine instance. +
If this value does not match the Mule version running in your deployment target, the plugin raises an exception.

The Mule Maven Plugin does not download a Mule runtime engine if these values don't match.
| `muleHome` | The location of the Mule instance in your local machine.
include::partial$mmp-concept.adoc[tag=deploymentTimeoutParameterDescription]
include::partial$mmp-concept.adoc[tag=skipParameterDescription]

|===

[[mmp-deploy-arm]]
== Deploy a Mule Application Using the Runtime Manager REST API

Mule Maven plugin enables you to deploy a Mule Application to a local Mule instance using the Runtime Manager REST API.

=== Prerequisites

* You need a server, server group or cluster created in Runtime Manager. +
** To create a server, see xref:runtime-manager::servers-create.adoc#creating-a-server[Creating a Server]. +
** To create a server group, see xref:runtime-manager::server-group-create[Creating a Server Group]. +
** To create a cluster, see xref:runtime-manager::cluster-create#creating-a-cluster[Creating a Cluster]. +

=== Deploying Using the Runtime Manager REST API

. Make sure you added the Mule Maven plugin to your `pom.xml` file.
. Inside the `plugin` element, add a configuration for your Runtime Manager deployment, replacing the placeholder values with your Runtime Manager information:
+
[source,xml,linenums]
----
<plugin>
include::example$mmp-concept-config.xml[]
  <configuration>
    <armDeployment>
      <muleVersion>${app.runtime}</muleVersion>
      <uri>https://anypoint.mulesoft.com</uri>
      <target>${target}</target>
      <targetType>${target.type}</targetType>
      <username>${username}</username>
      <password>${password}</password>
      <environment>${environment}</environment>
      <properties>
        <key>value</key>
      </properties>
    </armDeployment>
  </configuration>
</plugin>
----
+
. From the command line in your project's folder, package the application and execute the deploy goal:
+
[source,console,linenums]
----
mvn clean package deploy -DmuleDeploy
----

=== Runtime Manager REST API Deployment Reference

[%header%autowidth.spread,cols="a,a"]
|===
|Parameter | Description
|`armDeployment` | Top-Level Element.
| `muleVersion` | The Mule version required for your application to run in your deployment target. +
If this value does not match the Mule version running in your deployment target, the plugin raises an exception.

The Mule Maven Plugin does not download a Mule runtime engine if these values don't match.
| `uri` | The server URI where your Mule instances are installed. +

If not set, by default this value is set to +https://anypoint.mulesoft.com+.
| `target` | The server name for the server where your Mule instances are installed.
| `targetType` | The type of target to which you are deploying.

Valid values are:

* server
* serverGroup
* cluster

| `username` | Your username for the server where your Mule instances are installed.
| `password` | Your password for the server where your Mule instances are installed.
| `environment` | The environment name for the server where your Mule instances are installed. This value must match any environment configured in your Runtime Manager account. +
For Example:
[source,xml,linenums]
----
<environment>Sandbox</environment>
----
include::partial$mmp-concept.adoc[tag=businessGroupParameterDescription]
include::partial$mmp-concept.adoc[tag=businessGroupIdParameterDescription]
include::partial$mmp-concept.adoc[tag=deploymentTimeoutParameterDescription]
include::partial$mmp-concept.adoc[tag=serverParameterDescription]
include::partial$mmp-concept.adoc[tag=propertiesParameterDescription]
include::partial$mmp-concept.adoc[tag=skipParameterDescription]
|===

[[mmp-deploy-agent]]
== Deploy a Mule Application Using the Mule Agent

Follow these steps to deploy a Mule Application to a local Mule instance using the Anypoint Runtime Manager agent:

. Make sure you added the Mule Maven plugin to your `pom.xml` file.
. Inside the `plugin` element, add a configuration for your Mule Agent deployment, replacing the URI value with your remote server information:
+
[source,xml,linenums]
----
<plugin>
include::example$mmp-concept-config.xml[]
  <configuration>
    <agentDeployment>
      <uri>http://localhost:9999/</uri>
    </agentDeployment>
  </configuration>
</plugin>
----
+
. From the command line in your project's folder, package the application and execute the deploy goal:
+
[source,console,linenums]
----
mvn clean package deploy -DmuleDeploy
----

=== Mule Agent Deployment Reference

[%header,cols="30,70"]
|===
|Parameter | Description
|`agentDeployment` | Top-Level Element.
| `muleVersion` | The Mule version required for your application to run in your deployment target. +
If this value does not match the Mule version running in your deployment target, the plugin raises an exception.

The Mule Maven Plugin does not download a Mule runtime engine if these values don't match.
| `uri` | The server URI where your Mule instances are installed.
include::partial$mmp-concept.adoc[tag=deploymentTimeoutParameterDescription]
include::partial$mmp-concept.adoc[tag=skipParameterDescription]

|===

== See Also

* xref:mmp-concept.adoc[Mule Maven Plugin]
