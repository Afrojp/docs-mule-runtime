= Flow Reference Component
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]
:keywords: email, connector, send, retrieve, manage, match, matcher, smtp, pop3, imap

//Anypoint Studio, Design Center connector
[[short_description]]
Flow Reference routes the Mule event to another flow or sub-flow, and then routes it back within the same Mule application. This process enables you to treat the entire referenced flow like a single component in your current flow.

Flow Reference breaks up the Mule application into discrete and reusable units. For example, a flow that lists files on a regular basis might reference another flow that processes the output of the List operation. Instead of appending all the processing steps, you can append a Flow Reference that points to the processing flow.

The next diagram shows the order of processing when one flow references another. When the main flow is triggered, the Mule event travels through and executes the flow until the event reaches the Flow Reference. The event then travels through and executes the referenced flow from beginning to end, and then returns to the main flow.

image::flowref-about-8b5d1.png[]

== Configure a Flow Reference

To configure a Flow Reference component, follow these steps in Anypoint Studio:

. Drag the Flow Reference component from *Mule Palette* to the point in your flow where you want to create the call to the referenced flow:
+
image:mruntime-flow-ref-create.png[flow-ref-create]
. Open the Flow Reference properties and specify the flow you want to reference in *Flow name*:
+
image:mruntime-flow-ref-config.png[flow-ref-config]

== Enrich Content with a Flow Reference Target Variable

You can store the result of a Flow Reference call in a target variable by configuring the following fields in your Flow Reference properties:

* *Target*: Name of the variable that the Flow Reference creates to store the result of the processed payload.
* *Target Value*: An expression that evaluates against the operation's output, the result of this evaluation is stored in the defined target variable.

=== XML Example

The following XML code represents the project configured in the previous steps, and also defines target variable `flowRefResult` which stores the result of the Flow Reference. This variable can then be called from the main flow by using `vars.flowRefResult`:

[source, xml, linenums]
----
<!-- Main flow -->
<flow name="mainFlow" >
  <http:listener doc:name="Listener" config-ref="HTTP_Listener_config" path="/test"/>
  <!-- Flow Reference component with target variable flowRefResult -->
  <flow-ref doc:name="Flow Reference" name="setVariableFlow" target="flowRefResult"/>
  <logger level="INFO" doc:name="Logger" />
</flow>
<!-- Secondary flow that is referenced from Main flow-->
<flow name="setVariableFlow"  >
  <set-variable variableName="var2" value="var2" />
</flow>
----

== See Also

* xref:about-mule-event.adoc[Mule Events]
* xref:target-variables.adoc[Enrich Data with Target Variables]
* xref:transaction-management.adoc#tx_scopes_routers[How Transactions Affect Scopes and Routers]
